<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø³Ø¦Ù„Ø©</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: #fff;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            margin: 20px 0;
            color: #fff;
        }
        .admin-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #333;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .user-name-form {
            background: #111;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            text-align: center;
        }
        .question {
            background: #111;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #333;
            display: none;
        }
        textarea {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            background: #222;
            color: white;
            border: 1px solid #444;
            border-radius: 3px;
            font-family: Arial, sans-serif;
        }
        .admin-panel {
            background: #111;
            padding: 20px;
            margin-top: 30px;
            border-radius: 5px;
            border: 2px solid #555;
            display: none;
        }
        .login-form {
            background: #111;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            display: none;
        }
        input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background: #222;
            color: white;
            border: 1px solid #444;
            border-radius: 3px;
        }
        button {
            background: #555;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 3px;
            cursor: pointer;
        }
        .user-info {
            background: #222;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            text-align: center;
        }
        .answer-item {
            background: #222;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #555;
        }
        .user-name {
            color: #4CAF50;
            font-weight: bold;
        }
        .timestamp {
            color: #aaa;
            font-size: 12px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <button class="admin-btn" onclick="showLogin()">ğŸ‘‘ Ù…Ø³Ø¤ÙˆÙ„</button>
    
    <div class="container">
        <h1>Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h1>
        
        <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
        <div id="userNameForm" class="user-name-form">
            <h3>Ù…Ø±Ø­Ø¨Ø§Ù‹! Ù…Ø§ Ù‡Ùˆ Ø§Ø³Ù…ÙƒØŸ</h3>
            <input type="text" id="userName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§" maxlength="30">
            <button onclick="saveUserName()">Ø¨Ø¯Ø¡ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
            <p style="margin-top: 10px; color: #aaa; font-size: 14px;">
                Ø³ÙŠØªÙ… Ø­ÙØ¸ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ù…Ø¹ Ø§Ø³Ù…Ùƒ
            </p>
        </div>
        
        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
        <div id="userInfo" class="user-info" style="display: none;">
            <p>Ø£Ù†Øª ØªØ¬ÙŠØ¨ Ø¨Ø§Ø³Ù…: <span id="currentUserName"></span></p>
            <button onclick="changeUserName()" style="background: #444; font-size: 12px;">ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù…</button>
        </div>
        
        <!-- Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ -->
        <div id="loginForm" class="login-form">
            <h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</h3>
            <p>Ø£Ø¯Ø®Ù„: 5 + 2 = ?</p>
            <input type="text" id="captcha" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©">
            <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
            <button onclick="hideLogin()" style="background: #333;">Ø¥Ù„ØºØ§Ø¡</button>
            <p id="loginError" style="color: red; margin-top: 10px;"></p>
        </div>
        
        <!-- Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
        <div id="questionsContainer">
            <!-- Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
        </div>
        
        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ -->
        <div id="adminPanel" class="admin-panel">
            <h2>ğŸ‘¨â€ğŸ’¼ Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>
            <div id="userList">
                <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
            </div>
            <div id="answersList">
                <!-- Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
            </div>
            <button onclick="logout()" style="background: #666;">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
            <button onclick="clearAllData()" style="background: #d32f2f; margin-left: 10px;">Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </div>
    </div>

    <script>
        // ==================== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ====================
        const ADMIN_PASS = "m7mdmohamad123321";
        let questions = [
            {id: 1, text: "Ù…Ø§ Ù‡Ùˆ Ø¯ÙŠÙ†ÙƒØŸ"},
            {id: 2, text: "ØªØµÙ„ÙŠØŸ"},
            {id: 3, text: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ø±ÙƒØ§Ù† Ø§Ù„Ø§Ø³Ù„Ø§Ù… ÙˆÙ…Ø§ Ù‡Ù…ØŸ"},
            {id: 4, text: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ø±ÙƒØ§Ù† Ø§Ù„Ø§ÙŠÙ…Ø§Ù† ÙˆÙ…Ø§ Ù‡Ù…ØŸ"},
            {id: 5, text: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªÙˆØ­ÙŠØ¯ØŸ"},
            {id: 6, text: "Ù…Ø§ Ù‡ÙŠ Ø§Ø±ÙƒØ§Ù† Ø§Ù„ØªÙˆØ­ÙŠØ¯ØŸ"},
            {id: 7, text: "Ù…Ø§ Ù‡Ùˆ ÙˆÙ„Ø§Ø¡ ÙˆØ§Ù„Ø¨Ø±Ø§Ø¡ØŸ"}
        ];

        // ==================== ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ====================
        
        // Ø­ÙØ¸ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function saveUserName() {
            const userName = document.getElementById('userName').value.trim();
            if (!userName) {
                alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ");
                return;
            }
            
            localStorage.setItem('currentUserName', userName);
            document.getElementById('userNameForm').style.display = 'none';
            document.getElementById('userInfo').style.display = 'block';
            document.getElementById('currentUserName').textContent = userName;
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
            showQuestions();
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
            document.querySelectorAll('.question').forEach(q => {
                q.style.display = 'block';
            });
        }

        // ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function changeUserName() {
            document.getElementById('userNameForm').style.display = 'block';
            document.getElementById('userInfo').style.display = 'none';
            document.getElementById('userName').value = localStorage.getItem('currentUserName') || '';
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        function showQuestions() {
            let html = '';
            questions.forEach(q => {
                const userName = localStorage.getItem('currentUserName') || 'Ù…Ø¬Ù‡ÙˆÙ„';
                const answerKey = `answer_${userName}_${q.id}`;
                const savedAnswer = localStorage.getItem(answerKey) || '';
                
                html += `
                    <div class="question" id="question_${q.id}">
                        <strong>${q.id}. ${q.text}</strong>
                        <textarea 
                            placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§..."
                            rows="3"
                            oninput="saveAnswer(${q.id}, this.value)"
                        >${savedAnswer}</textarea>
                        <div style="margin-top: 5px; font-size: 12px; color: #aaa;">
                            ${savedAnswer ? 'âœ“ ØªÙ… Ø§Ù„Ø­ÙØ¸' : 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ø¹Ø¯'}
                        </div>
                    </div>
                `;
            });
            document.getElementById('questionsContainer').innerHTML = html;
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù…Ø¹ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function saveAnswer(questionId, answer) {
            const userName = localStorage.getItem('currentUserName') || 'Ù…Ø¬Ù‡ÙˆÙ„';
            const answerKey = `answer_${userName}_${questionId}`;
            const timestamp = new Date().toLocaleString('ar-SA');
            
            const answerData = {
                answer: answer.trim(),
                userName: userName,
                questionId: questionId,
                timestamp: timestamp,
                questionText: questions.find(q => q.id === questionId)?.text || ''
            };
            
            localStorage.setItem(answerKey, JSON.stringify(answerData));
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø­ÙØ¸
            const statusDiv = document.querySelector(`#question_${questionId} div`);
            if (statusDiv) {
                statusDiv.textContent = answer.trim() ? 'âœ“ ØªÙ… Ø§Ù„Ø­ÙØ¸' : 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ø¹Ø¯';
                statusDiv.style.color = answer.trim() ? '#4CAF50' : '#aaa';
            }
        }

        // ==================== ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ ====================
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        function showLogin() {
            document.getElementById('loginForm').style.display = 'block';
        }

        // Ø¥Ø®ÙØ§Ø¡ Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        function hideLogin() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('loginError').textContent = '';
            document.getElementById('captcha').value = '';
            document.getElementById('password').value = '';
        }

        // ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
        function login() {
            const captcha = document.getElementById('captcha').value;
            const password = document.getElementById('password').value;
            
            if (captcha !== "7") {
                document.getElementById('loginError').textContent = "Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© (5+2=7)";
                return;
            }
            
            if (password !== ADMIN_PASS) {
                document.getElementById('loginError').textContent = "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©";
                return;
            }
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø§Ø¬Ø­
            hideLogin();
            document.getElementById('adminPanel').style.display = 'block';
            showAllAnswers();
        }

        // Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„
        function showAllAnswers() {
            const users = {};
            const answersList = document.getElementById('answersList');
            const userList = document.getElementById('userList');
            
            // Ù…Ø³Ø­ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³Ø§Ø¨Ù‚
            answersList.innerHTML = '';
            userList.innerHTML = '';
            
            // Ø¬Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…Ù† localStorage
            const allAnswers = [];
            
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                
                if (key.startsWith('answer_')) {
                    try {
                        const answerData = JSON.parse(localStorage.getItem(key));
                        allAnswers.push(answerData);
                        
                        // Ø¬Ù…Ø¹ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
                        if (answerData.userName && !users[answerData.userName]) {
                            users[answerData.userName] = true;
                        }
                    } catch (e) {
                        console.log('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', key);
                    }
                }
            }
            
            // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
            if (Object.keys(users).length > 0) {
                let userListHTML = '<h3>ğŸ‘¥ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:</h3>';
                Object.keys(users).forEach(user => {
                    userListHTML += `<span style="background: #333; padding: 5px 10px; margin: 0 5px 5px 0; border-radius: 3px; display: inline-block;">${user}</span>`;
                });
                userList.innerHTML = userListHTML;
            }
            
            // Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
            if (allAnswers.length === 0) {
                answersList.innerHTML = '<p style="color: #aaa; text-align: center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¨Ø¹Ø¯</p>';
                return;
            }
            
            // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ÙˆÙ‚Øª (Ù…Ù† Ø§Ù„Ø£Ø­Ø¯Ø«)
            allAnswers.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
            allAnswers.forEach(item => {
                if (!item.answer || item.answer.trim() === '') return;
                
                const answerDiv = document.createElement('div');
                answerDiv.className = 'answer-item';
                answerDiv.innerHTML = `
                    <div style="margin-bottom: 10px;">
                        <span class="user-name">ğŸ‘¤ ${item.userName}</span>
                        <span style="float: left; color: #aaa; font-size: 12px;">
                            ${item.timestamp}
                        </span>
                    </div>
                    <div><strong>Ø§Ù„Ø³Ø¤Ø§Ù„:</strong> ${item.questionText}</div>
                    <div style="margin-top: 5px;"><strong>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©:</strong> ${item.answer}</div>
                `;
                answersList.appendChild(answerDiv);
            });
            
            // Ø¥Ø¶Ø§ÙØ© Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
            const countDiv = document.createElement('div');
            countDiv.style.cssText = 'background: #333; padding: 10px; border-radius: 5px; margin: 15px 0; text-align: center;';
            countDiv.innerHTML = `<strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª: ${allAnswers.length}</strong>`;
            answersList.insertBefore(countDiv, answersList.firstChild);
        }

        // ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
        function logout() {
            document.getElementById('adminPanel').style.display = 'none';
        }

        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function clearAllData() {
            if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§ØªØŸ")) {
                // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
                for (let i = localStorage.length - 1; i >= 0; i--) {
                    const key = localStorage.key(i);
                    if (key.startsWith('answer_')) {
                        localStorage.removeItem(key);
                    }
                }
                alert("ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª");
                showAllAnswers();
            }
        }

        // ==================== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­ÙÙˆØ¸
            const savedName = localStorage.getItem('currentUserName');
            if (savedName) {
                document.getElementById('userNameForm').style.display = 'none';
                document.getElementById('userInfo').style.display = 'block';
                document.getElementById('currentUserName').textContent = savedName;
                showQuestions();
            }
            
            console.log("Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„:");
            console.log("- Ø§Ù„ÙƒØ§Ø¨ØªØ´Ø§: 7 (5 + 2)");
            console.log("- ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: m7mdmohamad123321");
            console.log("- Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù…Ù† Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„: questions[0].text = 'Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯'");
            console.log("- Ø«Ù… Ø§Ø³ØªØ¯Ø¹Ù showQuestions()");
        });
    </script>
</body>
</html>
